<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>Checkout Page - GA 電子商務範例</title>
<!-- 以下是 GA 追蹤碼的基本安裝 -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PM9X8XDHRZ"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments)};
gtag("js", new Date());

gtag("config", "G-PM9X8XDHRZ");
// 以下和電子商務有關的追蹤程式
// 追蹤：開始結帳
gtag("event", "begin_checkout", {
	"currency": "TWD",
	"value": 29900,
	"items":[
		{
			"item_id": "123456", // 產品編號
			"item_name": "iPhone 16", // 產品名稱
			// 以上為必填，以下選填
			"item_brand": "Apple", // 產品品牌
			"item_category": "iPhone", // 產品分類
			"item_variant": "128GB" // 產品選項
		}
	]
});
</script>
<style>
	table {border: 1px solid gray; width: 100%; background-color: rgb(0, 0, 0, 10%);}
	tr, td {border: 1px solid gray;}
</style>
</head>
<body>
	<form id="form1" action="thankyou-page.html">
	<div style="display: flex; justify-content: space-evenly; flex-wrap: wrap;" >
		<div>
			<h2>填寫結帳資訊</h2>
			<table id="table1">
				<tr id="row1" style = "font-weight: bold;">
					<h4>訂購內容</h4>
					<td>商品</td>
					<td>品名與規格</td>
					<td>單價</td>
					<td>數量</td>
				</tr>	
				<tr id="row2">
					<td><img src="https://www.apple.com/v/iphone/compare/ah/images/overview/compare_iphone16_white__gjb82vhi5be6_large.jpg" style = "width:100px;"></td>
					<td>iPhone 16 白色 128GB</td>
					<td>29,900</td>
					<td>1</td>
				</tr>
			</table>
			<br><hr>
			<h4>收件資訊與支付方式</h4>
			<p>收件人: <input type="text" name="custname" id="custname"></p>
			<p>收件人聯絡電話: <input type="text" name="phone" id="phone"></p>
			<p>支付工具: 
				<input type="radio" name="payment" value="pre" checked>門市繳費
				<input type="radio" name="payment" value="post">貨到付款
			</p>
		</div>
		<div style="align-content: flex-end;">
			<h4>合計金額: 29,900</h4>
			<input type="submit" value="結帳" style="border:0; background-color:gold; border-radius:10px; width:150px; height:50px; font-size:100%; font-weight:bold; color:black;">
		</div>
	</div>
	</form>
	
<script>
	document.getElementById('form1').onsubmit = function(){ return check_data(); };
	
	function check_data() {
	   var flag = true;
	   var message = '';
	
	// 檢查收件人	  
	   var custname = document.getElementById('custname');
	   if( custname.value=='') {
		  flag = false;
		  message += '(1) 收件人必填\n';
	   }
	// 檢查電話號碼 (不能為空白，且必須是數字)	  
	   var phone = document.getElementById('phone');
	   if( phone.value=='' || isNaN(phone.value)) {
		  flag = false;
		  message += '(2) 電話號碼有誤\n';
	   }
	// 最後處理
	   if(!flag) {
		  alert(message);
	   }
	   return flag;
	}
</script>

</body>
</html>
